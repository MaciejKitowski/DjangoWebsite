{% load staticfiles %}

<html>
    <head>
        <title>
            Ask a question
            {% if is_paginated %}
                | Page: {{ page_obj.number }}
            {% endif %}
        </title>
        <meta charset="UTF-8">
        <meta name="description" content="Projekt zaliczeniowy na przedmiot Zaawansowane języki skryptowe (Informatyka zaocznie UG - 1rok, semestr 2)">
        <meta name="keywords" content="Django, Python, UG, Uniwersytet Gdański, MFI, Wydział Matematyki fizyki i informatyki, I have no idea what i'm doing'">
        <meta name="author" content="Maciej Kitowski, grupa 1">

        <!-- Bootstrap -->
        <link rel="stylesheet" href="{% static 'bootstrap/css/bootstrap.min.css' %}">
        <script src="{% static 'jquery/jquery.min.js' %}"></script>
        <script src="{% static 'bootstrap/js/bootstrap.min.js' %}"></script>

        <link rel="stylesheet" href="{% static 'css/index.css' %}">
    </head>
    <body>
        <div id="header">
            <a href="/" class="Button">
                <img src="{% static 'graphics/logo.svg' %}" width="250px" height="40px"></img>
            </a>
            <a href="#" class="Button"> Categories </a>
            <div id="auth">
                <button type="button" class="Button" data-toggle="modal" data-target="#login">Login</button>
                <button type="button" class="Button" data-toggle="modal" data-target="#register">Register</button>

                <div class="modal fade" id="login" role="dialog">
                    <div class="modal-dialog">
                        <div class="modal-content">{% csrf_token %}
                            <div class="modal-header">
                                <h4 class="modal-title">Login</h4>
                            </div>
                            <div class="modal-body">
                                <form method="post">
                                    {% csrf_token %}
                                    <div class="input-group">
                                        <div class="input-group-addon"><i class="glyphicon glyphicon-user"></i></div>
                                        <input type="text" class="form-control" id="Username" placeholder="Username">
                                    </div>
                                    <div class="input-group">
                                        <div class="input-group-addon"><i class="glyphicon glyphicon-lock"></i></div>
                                        <input type="password" class="form-control" id="Password" placeholder="Password">
                                    </div>
                                    <hr/>
                                    <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                                    <button type="submit" class="btn btn-primary">Login</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="mainContent">
            <div id="questionNavbar">
                <div id="addQuestionButton">
                    <a href="#" class="btn btn-default" role="button">Add new question</a>
                </div>
                <div id="sortbyDropdown">
                    <div class="dropdown">
                        <button class="btn btn-default dropdown-toggle" type="button" id="sortDropdown" data-toggle="dropdown" aria-haspopup="true">Sort by <span class="glyphicon glyphicon-sort"></span></button>
                        <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="sortDropdown">
                            <li><a href="./date-asc">Date <span class="glyphicon glyphicon-sort-by-attributes"></span></a></li>
                            <li><a href="./date-desc">Date <span class="glyphicon glyphicon-sort-by-attributes-alt"></span></a></li>
                            <li role="separator" class="divider"></li>
                            <li><a href="./votes-asc">Votes <span class="glyphicon glyphicon-sort-by-attributes"></span></a></li>
                            <li><a href="./votes-desc">Votes <span class="glyphicon glyphicon-sort-by-attributes-alt"></span></a></li>
                            <li role="separator" class="divider"></li>
                            <li><a href="./views-asc">Views <span class="glyphicon glyphicon-sort-by-attributes"></span></a></li>
                            <li><a href="./views-desc">Views <span class="glyphicon glyphicon-sort-by-attributes-alt"></span></a></li>
                            <li role="separator" class="divider"></li>
                            <li><a href="./answers-asc">Answers <span class="glyphicon glyphicon-sort-by-attributes"></span></a></li>
                            <li><a href="./answers-desc">Answers <span class="glyphicon glyphicon-sort-by-attributes-alt"></span></a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <table>
                {% for question in questions %}
                    <tr>
                        <td class="votes">
                            {{ question.votes }} <br/>
                            <small>Votes</small>
                        </td>
                        <td class="views">
                            {{ question.views }} <br/>
                            <small>Views</small>
                        </td>
                        <td class ="answers">
                            {{ question.answersCount }} <br/>
                            <small>Answers</small>
                        </td>
                        <td class="question">
                            {{ question.title }} <br/>

                            {% for cat in question.categories.all %}
                                <a href = "/{{ cat }}/1" class = "category">{{ cat }}</a>
                            {% endfor %}
                            <br/>
                            <div class="detail"><b>{{ question.askDate|date:'Y-m-d H:i' }}</b> by {{ question.author }}</div>
                        </td>
                    </tr>
                {% empty %}
                    <tr><th>Nobody asked a question</th></tr>
                {% endfor %}
            </table>
            {% if is_paginated %}
                <div id="pageNumbers">
                    {% if page_obj.has_previous %}
                        <a href="/{{ page_obj.previous_page_number }}/{{ request.resolver_match.kwargs.sortby }}" class="page">Previous page</a>
                    {% endif %}

                    {% for pageNumber in page_obj.paginator.page_range %}
                        {% if pageNumber == page_obj.number %}
                            <a href="#" class="currentPage"> {{ pageNumber }} </a>
                        {% else %}
                            <a href="/{{ pageNumber }}/{{ request.resolver_match.kwargs.sortby }}" class="page"> {{ pageNumber }} </a>
                        {% endif %}
                    {% endfor %}

                    {% if page_obj.has_next %}
                        <a href="/{{ page_obj.next_page_number }}/{{ request.resolver_match.kwargs.sortby }}" class="page">Next page</a>
                    {% endif %}
                </div>
            {% endif %}
        </div>
        <a href="#" class="btn btn-default btn-lg" role="button" id="backToTop"><span class="glyphicon glyphicon-chevron-up"></span></a>
        <div id="footer">
            Created by Maciej Kitowski <br/>
            
            
            <a href = "https://github.com/MaciejKitowski"><small><img src="{% static 'graphics/github.svg' %}" width="30px"></img></small></a>
            <a href = "mailto:MaciejKitowski&#64;hotmail.com"><small><img src="{% static 'graphics/email.svg' %}" width="30px"></img></small></a> 
            <a href = "https://gitlab.com/Horunkan"><small><img src="{% static 'graphics/gitlab.svg' %}" width="30px"></img></small></a> <br/>
            <small>All rights reserved</small>
        </div>
    </body>
</html>
